<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-cytoscape/node_modules/cytoscape/src/collection/algorithms/page-rank.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-cytoscape">npmtest-cytoscape (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-cytoscape/node_modules/cytoscape/src/collection/algorithms/page-rank.js</span></h1>
    <h2>
        
        Statements: <span class="metric">3.7% <small>(3 / 81)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 25)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 5)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">3.8% <small>(3 / 79)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-cytoscape/node_modules/cytoscape/src/collection/algorithms/</a> &#187; page-rank.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">'use strict';
&nbsp;
var is = require( '../../is' );
&nbsp;
var elesfn = ({
&nbsp;
  pageRank: <span class="fstat-no" title="function not covered" >function( options ){</span>
<span class="cstat-no" title="statement not covered" >    options = options || {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var normalizeVector = <span class="fstat-no" title="function not covered" >function( vector ){</span></span>
<span class="cstat-no" title="statement not covered" >      var length = vector.length;</span>
&nbsp;
      // First, get sum of all elements
<span class="cstat-no" title="statement not covered" >      var total = 0;</span>
<span class="cstat-no" title="statement not covered" >      for( var i = 0; i &lt; length; i++ ){</span>
<span class="cstat-no" title="statement not covered" >        total += vector[ i ];</span>
      }
&nbsp;
      // Now, divide each by the sum of all elements
<span class="cstat-no" title="statement not covered" >      for( var i = 0; i &lt; length; i++ ){</span>
<span class="cstat-no" title="statement not covered" >        vector[ i ] = vector[ i ] / total;</span>
      }
    };
&nbsp;
    // dampingFactor - optional
<span class="cstat-no" title="statement not covered" >    if( options != null &amp;&amp;</span>
      options.dampingFactor != null ){
<span class="cstat-no" title="statement not covered" >      var dampingFactor = options.dampingFactor;</span>
    } else {
<span class="cstat-no" title="statement not covered" >      var dampingFactor = 0.8; </span>// Default damping factor
    }
&nbsp;
    // desired precision - optional
<span class="cstat-no" title="statement not covered" >    if( options != null &amp;&amp;</span>
      options.precision != null ){
<span class="cstat-no" title="statement not covered" >      var epsilon = options.precision;</span>
    } else {
<span class="cstat-no" title="statement not covered" >      var epsilon = 0.000001; </span>// Default precision
    }
&nbsp;
    // Max number of iterations - optional
<span class="cstat-no" title="statement not covered" >    if( options != null &amp;&amp;</span>
      options.iterations != null ){
<span class="cstat-no" title="statement not covered" >      var numIter = options.iterations;</span>
    } else {
<span class="cstat-no" title="statement not covered" >      var numIter = 200; </span>// Default number of iterations
    }
&nbsp;
    // Weight function - optional
<span class="cstat-no" title="statement not covered" >    if( options != null &amp;&amp;</span>
      options.weight != null &amp;&amp;
      is.fn( options.weight ) ){
<span class="cstat-no" title="statement not covered" >      var weightFn = options.weight;</span>
    } else {
      // If not specified, assume each edge has equal weight (1)
<span class="cstat-no" title="statement not covered" >      var weightFn = <span class="fstat-no" title="function not covered" >function( e ){<span class="cstat-no" title="statement not covered" ></span>return 1;}</span>;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    var cy = this._private.cy;</span>
<span class="cstat-no" title="statement not covered" >    var edges = this.edges().stdFilter( <span class="fstat-no" title="function not covered" >function( e ){</span> <span class="cstat-no" title="statement not covered" >return !e.isLoop(); </span>} );</span>
<span class="cstat-no" title="statement not covered" >    var nodes = this.nodes();</span>
<span class="cstat-no" title="statement not covered" >    var numNodes = nodes.length;</span>
<span class="cstat-no" title="statement not covered" >    var numEdges = edges.length;</span>
&nbsp;
    // Create numerical identifiers for each node
    // mapping: node id -&gt; position in nodes array
    // for reverse mapping, simply use nodes array
<span class="cstat-no" title="statement not covered" >    var id2position = {};</span>
<span class="cstat-no" title="statement not covered" >    for( var i = 0; i &lt; numNodes; i++ ){</span>
<span class="cstat-no" title="statement not covered" >      id2position[ nodes[ i ].id() ] = i;</span>
    }
&nbsp;
    // Construct transposed adjacency matrix
    // First lets have a zeroed matrix of the right size
    // We'll also keep track of the sum of each column
<span class="cstat-no" title="statement not covered" >    var matrix = [];</span>
<span class="cstat-no" title="statement not covered" >    var columnSum = [];</span>
<span class="cstat-no" title="statement not covered" >    var additionalProb = (1 - dampingFactor) / numNodes;</span>
&nbsp;
    // Create null matric
<span class="cstat-no" title="statement not covered" >    for( var i = 0; i &lt; numNodes; i++ ){</span>
<span class="cstat-no" title="statement not covered" >      var newRow = [];</span>
<span class="cstat-no" title="statement not covered" >      for( var j = 0; j &lt; numNodes; j++ ){</span>
<span class="cstat-no" title="statement not covered" >        newRow.push( 0.0 );</span>
      }
<span class="cstat-no" title="statement not covered" >      matrix.push( newRow );</span>
<span class="cstat-no" title="statement not covered" >      columnSum.push( 0.0 );</span>
    }
&nbsp;
    // Now, process edges
<span class="cstat-no" title="statement not covered" >    for( var i = 0; i &lt; numEdges; i++ ){</span>
<span class="cstat-no" title="statement not covered" >      var edge = edges[ i ];</span>
<span class="cstat-no" title="statement not covered" >      var s = id2position[ edge.source().id() ];</span>
<span class="cstat-no" title="statement not covered" >      var t = id2position[ edge.target().id() ];</span>
<span class="cstat-no" title="statement not covered" >      var w = weightFn( edge );</span>
&nbsp;
      // Update matrix
<span class="cstat-no" title="statement not covered" >      matrix[ t ][ s ] += w;</span>
&nbsp;
      // Update column sum
<span class="cstat-no" title="statement not covered" >      columnSum[ s ] += w;</span>
    }
&nbsp;
    // Add additional probability based on damping factor
    // Also, take into account columns that have sum = 0
<span class="cstat-no" title="statement not covered" >    var p = 1.0 / numNodes + additionalProb; </span>// Shorthand
    // Traverse matrix, column by column
<span class="cstat-no" title="statement not covered" >    for( var j = 0; j &lt; numNodes; j++ ){</span>
<span class="cstat-no" title="statement not covered" >      if( columnSum[ j ] === 0 ){</span>
        // No 'links' out from node jth, assume equal probability for each possible node
<span class="cstat-no" title="statement not covered" >        for( var i = 0; i &lt; numNodes; i++ ){</span>
<span class="cstat-no" title="statement not covered" >          matrix[ i ][ j ] = p;</span>
        }
      } else {
        // Node jth has outgoing link, compute normalized probabilities
<span class="cstat-no" title="statement not covered" >        for( var i = 0; i &lt; numNodes; i++ ){</span>
<span class="cstat-no" title="statement not covered" >          matrix[ i ][ j ] = matrix[ i ][ j ] / columnSum[ j ] + additionalProb;</span>
        }
      }
    }
&nbsp;
    // Compute dominant eigenvector using power method
<span class="cstat-no" title="statement not covered" >    var eigenvector = [];</span>
<span class="cstat-no" title="statement not covered" >    var nullVector = [];</span>
<span class="cstat-no" title="statement not covered" >    var previous;</span>
&nbsp;
    // Start with a vector of all 1's
    // Also, initialize a null vector which will be used as shorthand
<span class="cstat-no" title="statement not covered" >    for( var i = 0; i &lt; numNodes; i++ ){</span>
<span class="cstat-no" title="statement not covered" >      eigenvector.push( 1.0 );</span>
<span class="cstat-no" title="statement not covered" >      nullVector.push( 0.0 );</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    for( var iter = 0; iter &lt; numIter; iter++ ){</span>
      // New array with all 0's
<span class="cstat-no" title="statement not covered" >      var temp = nullVector.slice( 0 );</span>
&nbsp;
      // Multiply matrix with previous result
<span class="cstat-no" title="statement not covered" >      for( var i = 0; i &lt; numNodes; i++ ){</span>
<span class="cstat-no" title="statement not covered" >        for( var j = 0; j &lt; numNodes; j++ ){</span>
<span class="cstat-no" title="statement not covered" >          temp[ i ] += matrix[ i ][ j ] * eigenvector[ j ];</span>
        }
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      normalizeVector( temp );</span>
<span class="cstat-no" title="statement not covered" >      previous = eigenvector;</span>
<span class="cstat-no" title="statement not covered" >      eigenvector = temp;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var diff = 0;</span>
      // Compute difference (squared module) of both vectors
<span class="cstat-no" title="statement not covered" >      for( var i = 0; i &lt; numNodes; i++ ){</span>
<span class="cstat-no" title="statement not covered" >        diff += Math.pow( previous[ i ] - eigenvector[ i ], 2 );</span>
      }
&nbsp;
      // If difference is less than the desired threshold, stop iterating
<span class="cstat-no" title="statement not covered" >      if( diff &lt; epsilon ){</span>
<span class="cstat-no" title="statement not covered" >        break;</span>
      }
    }
&nbsp;
    // Construct result
<span class="cstat-no" title="statement not covered" >    var res = {</span>
      rank: <span class="fstat-no" title="function not covered" >function( node ){</span>
<span class="cstat-no" title="statement not covered" >        if( is.string( node ) ){</span>
          // is a selector string
<span class="cstat-no" title="statement not covered" >          var nodeId = (cy.filter( node )[0]).id();</span>
        } else {
          // is a node object
<span class="cstat-no" title="statement not covered" >          var nodeId = node.id();</span>
        }
<span class="cstat-no" title="statement not covered" >        return eigenvector[ id2position[ nodeId ] ];</span>
      }
    };
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >    return res;</span>
  } // pageRank
&nbsp;
}); // elesfn
&nbsp;
module.exports = elesfn;
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Thu Apr 20 2017 15:09:59 GMT+0000 (UTC)</div>
</div>
</body>
</html>
